apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: longhorn-system
resources:
  - namespace.yaml

# Add annotations to control ArgoCD sync behavior
commonAnnotations:
  argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true,Prune=false,ServerSideApply=true
  argocd.argoproj.io/hook: Skip

helmCharts:
  - name: longhorn
    repo: https://charts.longhorn.io
    version: 1.8.1
    releaseName: longhorn
    namespace: longhorn-system
    valuesFile: values.yaml
    includeCRDs: true