apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-operator-config
  namespace: cnpg-zalando
data:
  # Backup settings
  BACKUP_SCHEDULE: "30 00 * * *"
  BACKUP_RETENTION_LOCAL: "3"
  BACKUP_VOLUME_CLAIM: "postgres-backup-pvc"
  # Core settings
  kubernetes_use_configmaps: "true"
  docker_image: "registry.opensource.zalan.do/acid/spilo-15:3.0-p1"
  watched_namespace: "cnpg-zalando"
  enable_pod_antiaffinity: "false"
  enable_init_containers: "true"
  enable_sidecars: "true"
  enable_master_load_balancer: "true"
  enable_replica_load_balancer: "false"
  enable_team_superuser: "true"
  # Resource settings
  max_instances: "-1"
  min_instances: "-1"
  workers: "8"
  # Pod settings
  pod_terminate_grace_period: "5m"
  spilo_fsgroup: "1000"
  # Authentication and roles
  super_username: "postgres"
  replication_username: "repluser"
  secret_name_template: "{username}.{cluster}.credentials"
  infrastructure_roles_secret_name: "postgres.postgres-superuser.credentials"
