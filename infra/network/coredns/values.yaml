isClusterService: true
replicaCount: 1

prometheus:
  service:
    enabled: true
    annotations:
      prometheus.io/scrape: "true"
      prometheus.io/port: "9153"
  monitor:
    enabled: true
    additionalLabels: {}
    namespace: ""
    interval: "15s"

resources:
  limits:
    cpu: 100m
    memory: 128Mi
  requests:
    cpu: 100m
    memory: 128Mi

service:
  name: kube-dns
  clusterIP: ""
  externalTrafficPolicy: Local
  annotations: {}

serviceAccount:
  create: true

rbac:
  create: true
  pspEnable: false

# Health checks
livenessProbe:
  enabled: true
  initialDelaySeconds: 60
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 5
  successThreshold: 1

readinessProbe:
  enabled: true
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 5
  successThreshold: 1

servers:
  - zones:
    - zone: .
      scheme: dns://
    port: 53
    plugins:
      - name: errors
      - name: health
        configBlock: |-
          lameduck 5s
      - name: ready
      - name: prometheus
        parameters: 0.0.0.0:9153
      - name: forward
        parameters: . /etc/resolv.conf
      - name: cache
        parameters: 30
      - name: loop
      - name: reload
      - name: loadbalance

# Autoscaling
autoscaler:
  enabled: true
  coresPerReplica: 256
  nodesPerReplica: 16
  min: 1
  max: 3
  preventSinglePointFailure: true
  includeUnschedulableNodes: false