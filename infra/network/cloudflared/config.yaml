tunnel: threadripper
credentials-file: /etc/cloudflared/credentials/credentials.json
metrics: 0.0.0.0:2000
no-autoupdate: true

# Add minimal logging configuration
logFile: /var/log/cloudflared.log
loglevel: info

warp-routing:
  enabled: true

ingress:
  - hostname: hello.vanillax.me
    service: hello_world
  - hostname: "*.vanillax.me"
    service: https://cilium-gateway-external.gateway.svc.cluster.local:443
    originRequest:
      originServerName: "*.vanillax.me"
      # Add minimal header logging
      headers:
        - name: CF-Connecting-IP
        - name: X-Real-IP
  - hostname: vanillax.me
    service: https://cilium-gateway-external.gateway.svc.cluster.local:443
    originRequest:
      originServerName: vanillax.me
      # Add minimal header logging
      headers:
        - name: CF-Connecting-IP
        - name: X-Real-IP
  - service: http_status:404