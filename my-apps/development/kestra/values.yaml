# Only customize what we need, let the official Helm chart handle defaults

# Disable ingress since we're using HTTPRoute for external access
ingress:
  enabled: false
# Disable Docker-in-Docker (not compatible with Talos security policies)
dind:
  enabled: false
# Use Kubernetes task runner for ALL script types (comprehensive coverage)
pluginDefaults:
  - type: io.kestra.plugin.scripts
    forced: true
    values:
      taskRunner:
        type: io.kestra.plugin.kubernetes.runner.Kubernetes
        namespace: kestra
  - type: io.kestra.plugin.scripts.shell
    forced: true
    values:
      taskRunner:
        type: io.kestra.plugin.kubernetes.runner.Kubernetes
        namespace: kestra
  - type: io.kestra.plugin.scripts.python
    forced: true
    values:
      taskRunner:
        type: io.kestra.plugin.kubernetes.runner.Kubernetes
        namespace: kestra
# Global task runner configuration (fallback)
kestra:
  tasks:
    defaults:
      taskRunner:
        type: io.kestra.plugin.kubernetes.runner.Kubernetes
        namespace: kestra
# Resource configuration - increased memory for standalone mode
resources:
  requests:
    memory: 1Gi
    cpu: 500m
  limits:
    memory: 3Gi
    cpu: 2000m
