apiVersion: v1
kind: Pod
metadata:
  name: immich-debug
  namespace: immich
spec:
  restartPolicy: Never
  containers:
    - name: debug
      image: ghcr.io/immich-app/immich-server:release
      command: ["/bin/sh", "-c", "echo 'Debug pod ready for file permission testing' && sleep 3600"]
      volumeMounts:
        - name: uploads
          mountPath: /usr/src/app/upload
        - name: library
          mountPath: /usr/src/app/library
        - name: immich-data
          mountPath: /usr/src/app/thumbs
          subPath: thumbs
        - name: immich-data
          mountPath: /usr/src/app/encoded-video
          subPath: encoded-video
        - name: immich-data
          mountPath: /usr/src/app/profile
          subPath: profile
        - name: immich-data
          mountPath: /usr/src/app/backups
          subPath: backups
  volumes:
    - name: uploads
      persistentVolumeClaim:
        claimName: immich-uploads
    - name: library
      persistentVolumeClaim:
        claimName: immich-library
    - name: immich-data
      persistentVolumeClaim:
        claimName: immich-data
  nodeSelector:
    kubernetes.io/hostname: vanillax-ai
