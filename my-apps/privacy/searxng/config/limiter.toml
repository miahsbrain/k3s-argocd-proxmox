# Allow proxies to pass the real IP address.
[real_ip]

# Number of values to trust for X-Forwarded-For.

x_for = 2

# The prefix defines the number of leading bits in an address that are compared
# to determine whether or not an address is part of a (client) network.

ipv4_prefix = 32
ipv6_prefix = 48

# Increase the rate limits to be generous for API access from Open WebUI.
[botdetection.ip_limit]
window = 300      # 5 minutes
max_request = 1000  # Allow many requests

# This is the key fix: Explicitly disable the bot detection methods
# that are known to cause 403 Forbidden errors with API clients.

[botdetection.http_user_agent]
disable = true

[botdetection.http_accept]
disable = true

# Activate passlist of (hardcoded) IPs from the SearXNG organization,
# e.g. `check.searx.space`.
pass_searxng_org = false